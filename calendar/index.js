let e=[31,28,31,30,31,30,31,31,30,31,30,31],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sun.","Mon.","Tue.","Wed.","Thu.","Fri.","Sat."];const o=300;function u(e,t,n){return e<=t?t:e>=n?n:e}function r(){let e=new Date;document.getElementById("month_selector").value=e.getMonth(),document.getElementById("year_selector").value=e.getFullYear(),a()}function a(){let u=parseInt(document.getElementById("year_selector").value),r=parseInt(document.getElementById("month_selector").value),a=1,c=Array(35).fill(0),l=t[r],m=e[r];1!=r||u%4!=0||u%100==0&&u%400!=0||(m=29),++r<3?(a+=u,u-=1):a=a+u-2;let d=((23*r/9|0)+a+4+(u/4|0)-(u/100|0)+(u/400|0))%7;for(let e=0;e<m;e++)c[d+e]=e+1;let s=document.getElementById("canvas"),i=s.getContext("2d"),f=3300,p=2550,_=o*parseFloat(document.getElementById("margin_adjuster").value),h=o*parseFloat(document.getElementById("month_adjuster").value),b=o*parseFloat(document.getElementById("day_adjuster").value);i.fillStyle="white",i.fillRect(0,0,f,p),i.strokeStyle="black",i.lineWidth=15,i.strokeRect(_,_,f-2*_,p-2*_),i.beginPath(),i.moveTo(_,_+h),i.lineTo(f-_,_+h),i.moveTo(_,_+h+b),i.lineTo(f-_,_+h+b);let g=(p-2*_-h-b)/5;for(let e=1;e<=5;e++)i.moveTo(_,_+h+b+g*e),i.lineTo(f-_,_+h+b+g*e);let j=(f-2*_)/7;for(let e=1;e<=7;e++)i.moveTo(_+j*e,_+h),i.lineTo(_+j*e,p-_);i.textAlign="center",i.textBaseline="middle",i.fillStyle="black";let F="300px serif";if(y[0]&&null!=l&&(i.font="240px Times New Roman, serif",i.fillText(l,1650,_+h/2+0)),y[1]&&null!=n){i.font="120px serif";for(let e=0;e<7;e++)i.fillText(n[e],_+j*e+j/2,_+h+b/2+10)}if(null!=c){i.font=F;for(let e=0;e<35;e++)0!=c[e]&&((28==e||29==e)&&e+7<m+d?(i.moveTo(_+j*(e-28),p-_),i.lineTo(_+j*(e-27),p-_-g),i.font="160px serif",i.fillText(c[e],_+j*(e-28)+100,p-_-g+95),i.fillText(c[e]+7,_+j*(e-27)-100,p-_-75),i.font=F):i.fillText(c[e],_+j*(e%7)+j/2,_+h+b+g*(e/7|0)+170))}i.stroke();let v=s.toDataURL("image/png");var M=document.getElementById("download_button");M.href=v,M.download="calendar.png"}const c=["margin_adjuster","month_adjuster","day_adjuster"];let l=0,m=0,d=0,s=0,i=[.001,.001,.001],f=0;function p(e){document.getElementById(c[l]).value=u(Math.round(100*(s+i[l]*(e.pageX-m-e.pageY+d)))/100,0,4),f++,f>10&&(a(),f=0)}function _(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",_),a(),Math.abs(s-document.getElementById(c[l]).value)<.01&&document.getElementById(c[l]).focus()}function h(e,t){e.preventDefault(),l=t,s=parseFloat(document.getElementById(c[t]).value),m=e.pageX,d=e.pageY,document.addEventListener("mousemove",p),document.addEventListener("mouseup",_)}const y=[1,1];function b(e){y[e]=!y[e],a()}r();